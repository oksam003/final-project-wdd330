import{l as h,g as v}from"./utils-e5ad3006.js";async function y(e){const o=`https://api.zippopotam.us/us/${e}`;return fetch(o).then(t=>t.json()).then(t=>{const{latitude:i,longitude:n,state:a}=t.places[0],r=t.places[0]["place name"],d=t.places[0]["state abbreviation"];return console.log("Latitude:",i),console.log("Longitude:",n),console.log("placeName:",r),console.log("state:",a),console.log("stateAb:",d),new g(i,n,r,a,d)}).catch(t=>{throw console.log("Error:",t),t})}async function p(e,o){const i=`https://api.opencagedata.com/geocode/v1/json?q=${o},${e}&key=a978f547780a4ca9809a381feb3184c1`;fetch(i).then(n=>n.json()).then(n=>{if(n.results.length>0){const a=n.results[0].components.postcode;if(a){const r=document.getElementById("zipInput");r.value=a}}else console.log("No results found.")}).catch(n=>{console.log("Error:",n)})}function m(){return new Promise((e,o)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const i=t.coords.latitude,n=t.coords.longitude,a=new g(i,n);e(a)},t=>{o(t)}):o(new Error("Geolocation is not supported by this browser."))})}function f(){var e=document.getElementById("zip-entry"),o=document.createElement("p");o.textContent="Enter your zipcode and a date to find birds in your area now or ones that have been in your area on a previous date!",o.classList.add("zip-message");var t=document.createElement("form");t.id="zipcodeForm";var i=document.createElement("input");i.type="text",i.pattern="\\d{5}",i.id="zipInput",i.placeholder="12345",i.required=!0;var n=document.createElement("label");n.setAttribute("for","date"),n.textContent="Date:",t.appendChild(n);var a=document.createElement("input");a.type="date",a.id="date",a.name="date",a.required=!0;var r=new Date,d=r.toISOString().substr(0,10);a.defaultValue=d,t.appendChild(a);var c=document.createElement("input");c.type="submit",c.value="Find";var s=document.createElement("button");s.textContent="Use my location",t.appendChild(i),t.appendChild(c),e.appendChild(o),e.appendChild(t),e.appendChild(s),s.addEventListener("click",function(u){u.preventDefault(),m().then(l=>{p(l.getLongitude(),l.getLatitude())}).catch(l=>{console.log("Error:",l.message)})})}class g{constructor(o,t,i,n,a){this.latitude=o,this.longitude=t,this.placeName=i,this.state=n,this.stateAb=a}getLatitude(){return this.latitude}getLongitude(){return this.longitude}getPlaceName(){return this.placeName}getState(){return this.state}getStateAb(){return this.stateAb}toString(){return`Latitude: ${this.latitude}, Longitude: ${this.longitude}`}}h();f();m().then(e=>p(e.getLongitude(),e.getLatitude())).then(e=>{if(e){const o=document.getElementById("zipInput");o.value=e}}).catch(e=>{console.log("Error:",e.message)});var E=document.getElementById("zipcodeForm");E.addEventListener("submit",L);async function L(e){e.preventDefault();const t=document.getElementById("zipInput").value;var i=document.getElementById("date"),n=new Date(i.value),a=n.getDate(),r=n.getMonth()+1,d=n.getFullYear();try{const s=await y(t),u=100;var c=await v(s.getStateAb(),a,r,d,u);console.log(c),c?C(c):c=[]}catch(s){console.log("Error:",s)}}function C(e){const o=document.getElementById("birdListContainer");o.innerHTML="",e.forEach(t=>{const i=document.createElement("h2");i.textContent=t.comName;const n=document.createElement("p");n.textContent="Scientific Name: "+t.sciName;const a=document.createElement("p");a.textContent="Location Seen: "+b(t.locName);const r=document.createElement("p");r.textContent="Quantity Seen: "+t.howMany,o.appendChild(i),o.appendChild(n),o.appendChild(a),o.appendChild(r)})}function b(e){return e.split(" ").slice(0,-2).join(" ")}
